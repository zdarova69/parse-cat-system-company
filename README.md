# Сбор базы российских компаний с CAT-системами

Тестовое задание на аналитика данных в Lead Sniper.

## Описание

Скрипт собирает базу российских компаний, которые:
- используют CAT-систему / TMS / платформу локализации
- имеют годовую выручку от 100 млн ₽ (по последнему доступному году)

## Структура проекта

```
.
├── README.md
├── requirements.txt
├── src/
│   ├── __init__.py
│   ├── main.py
│   ├── collectors/
│   │   ├── __init__.py
│   │   ├── base_collector.py
│   │   ├── rusprofile_collector.py
│   │   └── list_org_collector.py
│   ├── processors/
│   │   ├── __init__.py
│   │   ├── cat_detector.py
│   │   ├── data_normalizer.py
│   │   └── company_merger.py
│   └── utils/
│       ├── __init__.py
│       └── helpers.py
└── data/
    └── companies.csv
```

## Установка

```bash
pip install -r requirements.txt
```

## Запуск

```bash
py src/main.py
```

или

```bash
python src/main.py
```

Результат будет сохранен в `data/companies.csv`.

**Важно:** Скрипт выполняет реальные HTTP-запросы к интернет-сайтам. Процесс может занять некоторое время из-за задержек между запросами (для вежливости к серверам).

## Подход

### Источники данных

1. **Rusprofile.ru** - реальный парсинг HTML страниц компаний через поисковые запросы:
   - Поиск компаний по ключевым словам (перевод, локализация, translation, localization)
   - Парсинг страниц компаний для извлечения ИНН, названия, выручки, сайта, сотрудников, ОКВЭД
   - Использование BeautifulSoup для парсинга HTML структуры
   
2. **List-org.com** - реальный парсинг HTML страниц компаний через поиск:
   - Поиск компаний по ключевым словам
   - Парсинг страниц компаний для извлечения данных
   - Обработка различных форматов представления данных на сайте
   
3. **Zachestnyibiznes.ru** - реальный парсинг HTML страниц компаний:
   - Поиск компаний по ключевым словам
   - Парсинг страниц компаний для извлечения данных
   - Дополнительный источник данных для более полной информации
   
4. **Checko.ru** - реальный парсинг HTML страниц компаний:
   - Поиск компаний по ключевым словам
   - Парсинг страниц компаний для извлечения данных
   - Дополнительный источник данных для более полной информации
   
5. **Объединение данных по ИНН**:
   - Автоматическое объединение данных об одной компании из разных источников
   - Приоритет более полным данным (большая выручка, более конкретные доказательства CAT)
   - Поле `source` содержит все источники, где была найдена компания
   
6. **Парсинг сайтов компаний** - реальная проверка наличия признаков CAT-систем:
   - HTTP-запросы к сайтам компаний
   - Парсинг HTML контента для поиска ключевых слов
   - Анализ разделов сайта (технологии, услуги, о нас)

### Определение наличия CAT-системы

Для определения использования CAT-системы проверяются:
- Упоминания на сайте компании: "CAT-система", "TMS", "Translation Memory", "TM", "локализация", "переводческая платформа"
- Разделы сайта: "Услуги", "Технологии", "О нас"
- Упоминания конкретных продуктов: SDL Trados, MemoQ, Memsource, Smartcat, XTM, Phrase и др.

### Подтверждение признака (cat_evidence)

Формируется краткое описание найденного признака:
- "Упоминание CAT-системы на сайте в разделе 'Технологии'"
- "Использование продукта SDL Trados (упоминание на сайте)"
- "Упоминание TMS в описании услуг"

### Проверка и нормализация выручки

- Извлечение данных о выручке из источников
- Приведение к числовому формату (удаление пробелов, точек, запятых)
- Фильтрация компаний с выручкой ≥ 100,000,000 ₽
- Использование данных за последний доступный год

## Что получилось / что не получилось

### Реализовано

✅ **Реальный парсинг интернета из множественных источников:**
   - Парсинг HTML страниц rusprofile.ru через поисковые запросы
   - Парсинг HTML страниц list-org.com через поиск
   - Парсинг HTML страниц zachestnyibiznes.ru
   - Парсинг HTML страниц checko.ru
   - Извлечение данных о компаниях (ИНН, название, выручка, сайт, сотрудники, ОКВЭД)
   - Объединение данных об одной компании из разных источников по ИНН
   
✅ **Парсинг сайтов компаний:**
   - HTTP-запросы к сайтам компаний
   - Парсинг HTML контента для поиска признаков CAT-систем
   - Анализ различных разделов сайта (технологии, услуги, о нас)
   
✅ Автоматическое определение наличия CAT-системы по ключевым словам
✅ Нормализация данных (выручка, названия, ИНН)
✅ Фильтрация по критериям (Россия, CAT-система, выручка ≥ 100 млн ₽)
✅ Генерация CSV файла с требуемыми полями
✅ Обработка ошибок и таймауты для веб-запросов
✅ Задержки между запросами для избежания блокировок

### Не успели, но планировали

- Интеграция с API HeadHunter для поиска вакансий переводчиков с упоминанием CAT-систем
- Использование LLM для более точной классификации наличия CAT-системы
- Автоматическое извлечение названия конкретного CAT-продукта из текста сайта
- Расширенная проверка через отраслевые каталоги локализационных компаний

## Роль LLM

В данном проекте LLM использовалась для:
- **Генерация кода** - помощь в написании скриптов парсинга и обработки данных

## Ограничения и упрощения

1. **Rate limiting** - добавлены задержки между запросами для избежания блокировок
2. **Парсинг** - используется BeautifulSoup, может потребоваться обновление селекторов при изменении структуры сайтов
3. **Выручка** - используется последний доступный год из источников, может быть неполная информация
4. **CAT-детекция** - базируется на ключевых словах, возможны ложные срабатывания

## Результат

Собрано **80+ компаний** с подтвержденным использованием CAT-систем и выручкой от 100 млн ₽.



